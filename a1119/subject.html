<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <p>https://hihocoder.com/problemset/problem/1119</p>p#1119 : 小Hi小Ho的惊天大作战：扫雷·二</p><p> input: </p><dd>
<pre>2
7 10
  0  0 -1  1 -1  1 -1  0 -1  0
 -1 -1  0  1 -1 -1  0 -1  0 -1
 -1 -1 -1 -1 -1  1  0  0  0  0
  1 -1  0  0 -1  0 -1 -1 -1  0
 -1 -1  0 -1 -1 -1 -1  0 -1 -1
  0  0  0  0  0 -1 -1  1 -1  0
 -1 -1  0  0 -1 -1  1 -1  1  0
8 8
 -1 -1 -1  2  3  2  1 -1
  2 -1 -1 -1 -1 -1  1  0
 -1 -1  1 -1  3 -1 -1 -1
 -1 -1 -1 -1 -1 -1 -1  1
 -1  2 -1 -1 -1 -1 -1 -1
  0 -1 -1  2 -1  2 -1  2
  1 -1  3 -1  1  1 -1 -1
 -1 -1  2  1  1 -1 -1 -1</pre>
</dd><p> output: </p><dd>
<pre>1 32
4 6</pre>
</dd><p><a data-target="#m1" data-toggle="modal" href="#">故事背景：禁区、绿洲与显而易见的判断</a></p><p>上回说道，小Hi开始教导小Ho如何编写一个解决扫雷问题的程序——来帮助他们逃出困境，而为了使得这个过程更有效率，小Hi将提出了若干个简单化版本的问题，而小Ho需要做得就是按照顺序依次解决这些问题，从而最终能够写出一个较为完美的程序！</p><p>那么在解决了第一个问题：“只有2行并且第二行全都探明了的迷宫”之后，小Hi接下来又要提出什么问题呢？</p><p>“小Hi呀，之前的问题似乎太过简单，而且在扫雷问题中并不具有普适性呢！”写完程序的小Ho疑惑的问道。</p><p>小Hi摇了摇头，道“之后你就知道了？现在我们来看另外一个方向的问题：如果就给你一块局部地图，不一定很大，但是也并不小——至少不会有边长为2的好事，你有什么办法判断哪些点一定有雷，哪些点一定没有雷么？”</p><p>“这个……我能知道一部分。”小Ho道：“如果有一个数字为0，那么他相邻的8个格子里一定没有地雷。”</p><p>“那么如果不是0呢？”小Hi问道：“如果是1、2、3……之类的呢？”</p><p>“唔……”小Ho思索道：“如果一个探明了的格子中的数字是K，并且它周围的8个格子中正好只有K个没有探明的格子……那么我就可以知道这K个格子一定是地雷！”</p><p>“是的呢~”小Hi点头道：“那么，能不能再想几个呢？”</p><p>小Ho陷入了沉默，不过片刻之后便有了新的想法：“如果有两个探明了的格子A和B，他们中标明的数字分别为P_A和P_B，且他们周围8个格子中没有探明的格子组成的集合分别为S_A和S_B，如果S_A包含S_B，且|S_A|-|S_B|=P_A-P_B，那么可以知道S_A-S_B，也就是S_A比S_B多出的那些未探明格子，一定全部都是地雷！”</p><p>“没错，这也算一个，那也差不多够了~”小Hi道：“现在问题来了！”</p><p>给出一张N*M的地图，其中的某些格子已经被探明，探明的格子中都标有一个数字，表明与它相邻的8个格子里的地雷数量，而没有探明的格子里可能会有一些地雷。</p><p>现在小Ho仅仅知道如下三条规则：</p><p>1.如果某一个被探明的格子里所标的数字为0，那么它相邻的8个格子里的未探明格子被认作是<strong>一定不是地雷的格子</strong>。</p><p>2.如果某一个被探明的格子里所标的数字为K，且它相邻的8个格子里正好有K个没有探明的格子的话，则这K个没有探明的格子被认作是<strong>一定是地雷的格子</strong>。</p><p>3.如果某两个探明了的格子A和B，他们中标明的数字分别为P_A和P_B，且他们周围8个格子中没有探明的格子组成的集合分别为S_A和S_B，如果S_A包含S_B，且|S_A|-|S_B|=P_A-P_B，那么S_A-S_B中的所有格子，被认作是<strong>一定是地雷的格子</strong>。</p><p>而问题是：仅仅利用这三条规则，小Ho到底能判断出<strong>哪些没有探明的格子里一定是地雷，而哪些没有探明的格子里一定不是地雷</strong>呢？</p><p>值得注意的是：小Ho在这个问题上并不擅长，所以利用第一条规则导致一些未探明格子可以被判断为一定不是地雷，从而使得第二、三条规则可以作用的推理小Ho是做不出来的！所以<strong>每次规则的推导应当视作独立的，即不基于任何其他推导出的结论进行</strong>。<!-- Button trigger modal --></p><p><a data-target="#m2" data-toggle="modal" href="#">提示：将简单的事情不断重复的做好是达到成功的基础</a></p><p>小Ho低头思索片刻，道：“<strong>对于前两条规则，我只需要依次查看每一个探明了的格子，比较其周围的没有探明格子数量以及格子中所标数字</strong>……应该就可以判断出周围的格子中哪些一定是雷，哪些一定不是雷。”</p><p>“而对于第三条规则……虽然枚举2个格子的时间复杂度是明显超过要求的——O(N^2M^2)，但是考虑到既然这2个格子有重叠部分的情况其实不是很多，我可以<strong>枚举一个格子，然后在这个格子的附近枚举第二个格子，然后统计他们周围未探明格子的集合，判断是否包含，以及数量同标明数字之间的关系</strong>——应该就可以了……也是挺容易解决的问题呢！”</p><p style="color:red"><strong>注意啦！在某位即将登场的同学反馈后，小Hi特此声明：下面的两段话说的不是解题思路！而是这个问题在解决整个扫雷问题时的用法~大家千万不要看错啦/(ㄒoㄒ)/~~ </strong></p><p>“的确是很容易的问题。”小Hi点了点头：“但是这就是玩扫雷时最经常用到的策略……这样的策略并不是只用一次的，而是每使用一次之后通过探明那些被认为一定不是雷的点，从而获知更多标明的数字，然后通过这样的方法一步一步的将整个地图探索出来。”</p><p>小Hi继续道：“所以在你写出了这个程序之后，你就可以针对当前的局面判断出那些一定不是雷的格子，然后去将他们探明，然后拿新的局面再重复进行计算，直到全部地图都已经被探明/判断为地雷，或者到什么也判断不出的时候，而那个时候，起作用的就是我接下来要说的东西了！”</p><p>于是小Ho用力的点了点头，开始为了自己的生命写起了程序！</p><p>每个测试点（输入文件）存在多组测试数据。</p><p>每个测试点的第一行为一个整数Task，表示测试数据的组数。</p><p>在一组测试数据中：</p><p>第1行为2个整数N，M，表示迷宫的大小。</p><p>接下来的N行，每行M个整数，为一个矩阵A，用以描述整个迷宫，其中对于每一个格子A[i][j]，若A[i][j]=-1，则表示该格子没有被探明，若0&lt;=A[i][j]&lt;=8，则表示该格子已经被探明了，且数值代表该格子附近8个格子中的地雷数。&lt;&gt;</p><p>对于100%的数据，满足：5&lt;=N、M&lt;=2*10^2, -1&lt;=A[i][j]&lt;=8。&lt;&gt;</p><p>对于100%的数据，满足：符合数据描述的迷宫一定存在。</p><p>对于每组测试数据，输出2个整数，分别为一定为地雷的未探明格子数和一定不为地雷的未探明格子数。</p><p><br/></p><p><br/></p><p><br/></p><p><a data-target="#m1" data-toggle="modal" href="#">故事背景：禁区、绿洲与显而易见的判断</a></p><p>上回说道，小Hi开始教导小Ho如何编写一个解决扫雷问题的程序——来帮助他们逃出困境，而为了使得这个过程更有效率，小Hi将提出了若干个简单化版本的问题，而小Ho需要做得就是按照顺序依次解决这些问题，从而最终能够写出一个较为完美的程序！</p><p>那么在解决了第一个问题：“只有2行并且第二行全都探明了的迷宫”之后，小Hi接下来又要提出什么问题呢？</p><p>“小Hi呀，之前的问题似乎太过简单，而且在扫雷问题中并不具有普适性呢！”写完程序的小Ho疑惑的问道。</p><p>小Hi摇了摇头，道“之后你就知道了？现在我们来看另外一个方向的问题：如果就给你一块局部地图，不一定很大，但是也并不小——至少不会有边长为2的好事，你有什么办法判断哪些点一定有雷，哪些点一定没有雷么？”</p><p>“这个……我能知道一部分。”小Ho道：“如果有一个数字为0，那么他相邻的8个格子里一定没有地雷。”</p><p>“那么如果不是0呢？”小Hi问道：“如果是1、2、3……之类的呢？”</p><p>“唔……”小Ho思索道：“如果一个探明了的格子中的数字是K，并且它周围的8个格子中正好只有K个没有探明的格子……那么我就可以知道这K个格子一定是地雷！”</p><p>“是的呢~”小Hi点头道：“那么，能不能再想几个呢？”</p><p>小Ho陷入了沉默，不过片刻之后便有了新的想法：“如果有两个探明了的格子A和B，他们中标明的数字分别为P_A和P_B，且他们周围8个格子中没有探明的格子组成的集合分别为S_A和S_B，如果S_A包含S_B，且|S_A|-|S_B|=P_A-P_B，那么可以知道S_A-S_B，也就是S_A比S_B多出的那些未探明格子，一定全部都是地雷！”</p><p>“没错，这也算一个，那也差不多够了~”小Hi道：“现在问题来了！”</p><p>给出一张N*M的地图，其中的某些格子已经被探明，探明的格子中都标有一个数字，表明与它相邻的8个格子里的地雷数量，而没有探明的格子里可能会有一些地雷。</p><p>现在小Ho仅仅知道如下三条规则：</p><p>1.如果某一个被探明的格子里所标的数字为0，那么它相邻的8个格子里的未探明格子被认作是<strong>一定不是地雷的格子</strong>。</p><p>2.如果某一个被探明的格子里所标的数字为K，且它相邻的8个格子里正好有K个没有探明的格子的话，则这K个没有探明的格子被认作是<strong>一定是地雷的格子</strong>。</p><p>3.如果某两个探明了的格子A和B，他们中标明的数字分别为P_A和P_B，且他们周围8个格子中没有探明的格子组成的集合分别为S_A和S_B，如果S_A包含S_B，且|S_A|-|S_B|=P_A-P_B，那么S_A-S_B中的所有格子，被认作是<strong>一定是地雷的格子</strong>。</p><p>而问题是：仅仅利用这三条规则，小Ho到底能判断出<strong>哪些没有探明的格子里一定是地雷，而哪些没有探明的格子里一定不是地雷</strong>呢？</p><p>值得注意的是：小Ho在这个问题上并不擅长，所以利用第一条规则导致一些未探明格子可以被判断为一定不是地雷，从而使得第二、三条规则可以作用的推理小Ho是做不出来的！所以<strong>每次规则的推导应当视作独立的，即不基于任何其他推导出的结论进行</strong>。<!-- Button trigger modal --></p><p><a data-target="#m2" data-toggle="modal" href="#">提示：将简单的事情不断重复的做好是达到成功的基础</a></p><p>小Ho低头思索片刻，道：“<strong>对于前两条规则，我只需要依次查看每一个探明了的格子，比较其周围的没有探明格子数量以及格子中所标数字</strong>……应该就可以判断出周围的格子中哪些一定是雷，哪些一定不是雷。”</p><p>“而对于第三条规则……虽然枚举2个格子的时间复杂度是明显超过要求的——O(N^2M^2)，但是考虑到既然这2个格子有重叠部分的情况其实不是很多，我可以<strong>枚举一个格子，然后在这个格子的附近枚举第二个格子，然后统计他们周围未探明格子的集合，判断是否包含，以及数量同标明数字之间的关系</strong>——应该就可以了……也是挺容易解决的问题呢！”</p><p style="color:red"><strong>注意啦！在某位即将登场的同学反馈后，小Hi特此声明：下面的两段话说的不是解题思路！而是这个问题在解决整个扫雷问题时的用法~大家千万不要看错啦/(ㄒoㄒ)/~~ </strong></p><p>“的确是很容易的问题。”小Hi点了点头：“但是这就是玩扫雷时最经常用到的策略……这样的策略并不是只用一次的，而是每使用一次之后通过探明那些被认为一定不是雷的点，从而获知更多标明的数字，然后通过这样的方法一步一步的将整个地图探索出来。”</p><p>小Hi继续道：“所以在你写出了这个程序之后，你就可以针对当前的局面判断出那些一定不是雷的格子，然后去将他们探明，然后拿新的局面再重复进行计算，直到全部地图都已经被探明/判断为地雷，或者到什么也判断不出的时候，而那个时候，起作用的就是我接下来要说的东西了！”</p><p>于是小Ho用力的点了点头，开始为了自己的生命写起了程序！</p><p>每个测试点（输入文件）存在多组测试数据。</p><p>每个测试点的第一行为一个整数Task，表示测试数据的组数。</p><p>在一组测试数据中：</p><p>第1行为2个整数N，M，表示迷宫的大小。</p><p>接下来的N行，每行M个整数，为一个矩阵A，用以描述整个迷宫，其中对于每一个格子A[i][j]，若A[i][j]=-1，则表示该格子没有被探明，若0&lt;=A[i][j]&lt;=8，则表示该格子已经被探明了，且数值代表该格子附近8个格子中的地雷数。&lt;&gt;</p><p>对于100%的数据，满足：5&lt;=N、M&lt;=2*10^2, -1&lt;=A[i][j]&lt;=8。&lt;&gt;</p><p>对于100%的数据，满足：符合数据描述的迷宫一定存在。</p><p>对于每组测试数据，输出2个整数，分别为一定为地雷的未探明格子数和一定不为地雷的未探明格子数。</p><p><br/></p><p><br/></p><p><br/></p><p>Lifangting Building, Shanyuan Street, Haidian, Beijing</p><p>© 2017 hihoCoder Hu ICP No.14022864</p>